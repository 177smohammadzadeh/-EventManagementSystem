{% extends "shared/layout.html" %}
<!-- Extends the base layout  -->

{% block content %}
<div class="form-container">
    <h1>Register</h1>
    <!-- Title for the registration form -->

     {% if messages %}
        <div class="messages">
            {% for message in messages %}
            <!-- Display system or validation messages dynamically -->
                <div class="alert {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}

    <form method="post" action="" >
        {% csrf_token %}
        <!-- Adds CSRF token for form security -->

        <!-- Username field -->
        <div class="form-row">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" value="{{ form.username.value|default_if_none:'' }}" required>
            <div>Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.</div>
            {% if form.username.errors %}
             <!-- Display username validation errors if present -->
                <div class="error">
                    {{ form.username.errors|striptags }}
                </div>
            {% endif %}
        </div>

        <!-- First name field -->
        <div class="form-row">
            <label for="first_name">First Name:</label>
            <input type="text" id="first_name" name="first_name" value="{{ form.first_name.value|default_if_none:'' }}" required>
            {% if form.first_name.errors %}
            <!-- Display first name validation errors if present -->
                <div class="error">
                    {{ form.first_name.errors|striptags }}
                </div>
            {% endif %}
        </div>

        <!-- Last name field -->
        <div class="form-row">
            <label for="last_name">Last Name:</label>
            <input type="text" id="last_name" name="last_name" value="{{ form.last_name.value|default_if_none:'' }}" required>
            {% if form.last_name.errors %}
            <!-- Display last name validation errors if present -->
                <div class="error">
                    {{ form.last_name.errors|striptags }}
                </div>
            {% endif %}
        </div>

        <!-- Email field -->
        <div class="form-row">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="{{ form.email.value|default_if_none:'' }}" required>
            <div>Please enter a valid email address.</div>
            {% if form.email.errors %}
            <!-- Display email validation errors if present -->
                <div class="error">
                    {{ form.email.errors|striptags }}
                </div>
            {% endif %}
        </div>

        <!-- Password field -->
        <div class="form-row">
            <label for="password1">Password:</label>
            <input type="password" id="password1" name="password1" value="{{ form.password1.value|default_if_none:'' }}" required>
            <div>
                <ul>
                    <li>Your password can’t be too similar to your other personal information.</li>
                    <li>Your password must contain at least 8 characters.</li>
                    <li>Your password can’t be a commonly used password.</li>
                    <li>Your password can’t be entirely numeric.</li>
                </ul>
            </div>
            {% if form.password1.errors %}
            <!-- Display password validation errors if present -->
                <div class="error">
                    {{ form.password1.errors|striptags }}
                </div>
            {% endif %}
        </div>

        <!-- Confirm password field -->
        <div class="form-row">
            <label for="password2">Confirm Password:</label>
            <input type="password" id="password2" name="password2" value="{{ form.password2.value|default_if_none:'' }}" required>
            <div>Enter the same password as before, for verification.</div>
            {% if form.password2.errors %}
            <!-- Display confirm password validation errors if present -->
                <div class="error">
                    {{ form.password2.errors|striptags }}
                </div>
            {% endif %}
        </div>

        <!-- Form actions -->
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Register</button>
            <!-- Link to navigate back to the homepage -->
            <a class="btn" href="{% url 'home' %}">Back to Home</a>
        </div>
    </form>
</div>
{% endblock %}
